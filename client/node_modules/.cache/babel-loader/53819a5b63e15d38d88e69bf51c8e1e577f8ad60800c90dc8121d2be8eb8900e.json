{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/vales/Documents/coding/MERN Stack/mern-todo-auth/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/vales/Documents/coding/MERN Stack/mern-todo-auth/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/vales/Documents/coding/MERN Stack/mern-todo-auth/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useAuthContext}from'../context/authContext';import Box from'@mui/material/Box';import Paper from'@mui/material/Paper';import TextField from'@mui/material/TextField';import Button from'@mui/material/Button';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var _useAuthContext=useAuthContext(),dispatch=_useAuthContext.dispatch;var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response,user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();setLoading(true);_context.next=4;return fetch('http://localhost:4000/api/user/login',{method:'POST',headers:{'Content-type':'application/json'},body:JSON.stringify({email:email,password:password})});case 4:response=_context.sent;_context.next=7;return response.json();case 7:user=_context.sent;if(!response.ok){setError(user.error);setLoading(false);}if(response.ok){localStorage.setItem('user',JSON.stringify(user));dispatch({type:'LOGIN',payload:user});setLoading(false);setEmail('');setPassword('');setError('');}case 10:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();React.useEffect(function(){setTimeout(function(){setError('');},3000);},[error]);return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',width:'100%',minHeight:'100vh',backgroundColor:'#0077b6'},children:/*#__PURE__*/_jsx(Paper,{elevation:3,style:{padding:24,width:360},children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{display:'flex',flexDirection:'column',gap:12},children:[/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"Email\",variant:\"outlined\",type:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"Password\",variant:\"outlined\",type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",disabled:loading,type:\"submit\",children:\"Login\"}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",style:{textDecoration:'none',color:'#0077b6'},children:/*#__PURE__*/_jsx(\"a\",{children:\"New user? Register here\"})}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red'},children:error})]})})});};export default Login;","map":{"version":3,"names":["React","useState","useAuthContext","Box","Paper","TextField","Button","Link","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","error","setError","_useState7","_useState8","loading","setLoading","_useAuthContext","dispatch","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","response","user","wrap","_callee$","_context","prev","next","preventDefault","fetch","method","headers","body","JSON","stringify","sent","json","ok","localStorage","setItem","type","payload","stop","_x","apply","arguments","useEffect","setTimeout","sx","display","justifyContent","alignItems","width","minHeight","backgroundColor","children","elevation","style","padding","onSubmit","flexDirection","gap","id","label","variant","value","onChange","target","disabled","to","textDecoration","color"],"sources":["C:/Users/vales/Documents/coding/MERN Stack/mern-todo-auth/client/src/components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useAuthContext } from '../context/authContext';\r\nimport Box from '@mui/material/Box';\r\nimport Paper from '@mui/material/Paper';\r\nimport TextField from '@mui/material/TextField';\r\nimport Button from '@mui/material/Button';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Login = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { dispatch } = useAuthContext();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    const response = await fetch('http://localhost:4000/api/user/login', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ email, password }),\r\n    });\r\n\r\n    const user = await response.json();\r\n    if (!response.ok) {\r\n      setError(user.error);\r\n      setLoading(false);\r\n    }\r\n    if (response.ok) {\r\n      localStorage.setItem('user', JSON.stringify(user));\r\n      dispatch({ type: 'LOGIN', payload: user });\r\n      setLoading(false);\r\n      setEmail('');\r\n      setPassword('');\r\n      setError('');\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    setTimeout(() => {\r\n      setError('');\r\n    }, 3000);\r\n  }, [error]);\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        width: '100%',\r\n        minHeight: '100vh',\r\n        backgroundColor: '#0077b6',\r\n      }}\r\n    >\r\n      <Paper elevation={3} style={{ padding: 24, width: 360 }}>\r\n        <form\r\n          onSubmit={handleSubmit}\r\n          style={{ display: 'flex', flexDirection: 'column', gap: 12 }}\r\n        >\r\n          <TextField\r\n            id='outlined-basic'\r\n            label='Email'\r\n            variant='outlined'\r\n            type='email'\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n          <TextField\r\n            id='outlined-basic'\r\n            label='Password'\r\n            variant='outlined'\r\n            type='password'\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n          <Button variant='contained' disabled={loading} type='submit'>\r\n            Login\r\n          </Button>\r\n          <Link\r\n            to='/signup'\r\n            style={{ textDecoration: 'none', color: '#0077b6' }}\r\n          >\r\n            <a>New user? Register here</a>\r\n          </Link>\r\n          {error && <div style={{ color: 'red' }}>{error}</div>}\r\n        </form>\r\n      </Paper>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}